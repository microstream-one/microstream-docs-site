<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14.0.2) on Thu Jul 22 10:43:03 CEST 2021 -->
<title>StorageEntityCacheEvaluator (MicroStream API 5.0)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-07-22">
<meta name="description" content="declaration: package: one.microstream.storage.types, interface: StorageEntityCacheEvaluator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../javadoc-stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":6,"i1":18,"i2":1,"i3":1,"i4":1};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StorageEntityCacheEvaluator.html">Use</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">one.microstream.storage.types</a></div>
<h1 title="Interface StorageEntityCacheEvaluator" class="title">Interface StorageEntityCacheEvaluator</h1>
</div>
<div class="contentContainer">
<section class="description">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="StorageEntityCacheEvaluator.Default.html" title="class in one.microstream.storage.types">StorageEntityCacheEvaluator.Default</a></code></dd>
</dl>
<dl>
<dt>Functional Interface:</dt>
<dd>This is a functional interface and can therefore be used as the assignment target for a lambda expression or method reference.</dd>
</dl>
<hr>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang" class="externalLink">@FunctionalInterface</a>
public interface <span class="typeNameLabel">StorageEntityCacheEvaluator</span></pre>
<div class="block">Function type that evaluates if a live entity (entity with cached data) shall be unloaded (its cache cleared).
 <p>
 Note that any implementation of this type must be safe enough to never throw an exception as this would doom
 the storage thread that executes it. Catching any exception would not prevent the problem for the channel thread
 as the function has to work in order for the channel to work properly.
 It is therefore strongly suggested that implementations only use "exception free" logic (like simple arithmetic)
 or handle any possible exception internally.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="StorageEntityCacheEvaluator.Default.html" title="class in one.microstream.storage.types">StorageEntityCacheEvaluator.Default</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator.Defaults</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="StorageEntityCacheEvaluator.Validation.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator.Validation</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t5" class="tableTab" onclick="show(16);">Default Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearEntityCache(long,long,one.microstream.storage.types.StorageEntity)">clearEntityCache</a></span>&#8203;(long&nbsp;totalCacheSize,
long&nbsp;evaluationTime,
<a href="StorageEntity.html" title="interface in one.microstream.storage.types">StorageEntity</a>&nbsp;entity)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initiallyCacheEntity(long,long,one.microstream.storage.types.StorageEntity)">initiallyCacheEntity</a></span>&#8203;(long&nbsp;totalCacheSize,
long&nbsp;evaluationTime,
<a href="StorageEntity.html" title="interface in one.microstream.storage.types">StorageEntity</a>&nbsp;entity)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>static <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#New()">New</a></span>()</code></th>
<td class="colLast">
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using default values defined by <a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a>.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>static <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#New(long)">New</a></span>&#8203;(long&nbsp;timeoutMs)</code></th>
<td class="colLast">
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using the passed value and default values defined by <a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>static <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#New(long,long)">New</a></span>&#8203;(long&nbsp;timeoutMs,
long&nbsp;threshold)</code></th>
<td class="colLast">
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using the passed values.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="clearEntityCache(long,long,one.microstream.storage.types.StorageEntity)">clearEntityCache</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">clearEntityCache</span>&#8203;(<span class="arguments">long&nbsp;totalCacheSize,
long&nbsp;evaluationTime,
<a href="StorageEntity.html" title="interface in one.microstream.storage.types">StorageEntity</a>&nbsp;entity)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="initiallyCacheEntity(long,long,one.microstream.storage.types.StorageEntity)">initiallyCacheEntity</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">initiallyCacheEntity</span>&#8203;(<span class="arguments">long&nbsp;totalCacheSize,
long&nbsp;evaluationTime,
<a href="StorageEntity.html" title="interface in one.microstream.storage.types">StorageEntity</a>&nbsp;entity)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="New()">New</a></h3>
<div class="memberSignature"><span class="modifiers">static</span>&nbsp;<span class="returnType"><a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></span>&nbsp;<span class="memberName">New</span>()</div>
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using default values defined by <a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a>.
 <p>
 For explanations and customizing values, see <a href="#New(long,long)"><code>New(long, long)</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#New(long)"><code>New(long)</code></a>, 
<a href="#New(long,long)"><code>New(long, long)</code></a>, 
<a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="New(long)">New</a></h3>
<div class="memberSignature"><span class="modifiers">static</span>&nbsp;<span class="returnType"><a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></span>&nbsp;<span class="memberName">New</span>&#8203;(<span class="arguments">long&nbsp;timeoutMs)</span></div>
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using the passed value and default values defined by <a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a>.
 <p>
 For explanations and customizing values, see <a href="#New(long,long)"><code>New(long, long)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeoutMs</code> - the time (in milliseconds, greater than 0) of not being read (the "age"), after which a particular
        entity's data will be cleared from the Storage's internal cache.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/NumberRangeException.html" title="class in one.microstream.exceptions">NumberRangeException</a></code> - if the passed value is equal to or lower than 0.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#New()"><code>New()</code></a>, 
<a href="#New(long,long)"><code>New(long, long)</code></a>, 
<a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="New(long,long)">New</a></h3>
<div class="memberSignature"><span class="modifiers">static</span>&nbsp;<span class="returnType"><a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types">StorageEntityCacheEvaluator</a></span>&nbsp;<span class="memberName">New</span>&#8203;(<span class="arguments">long&nbsp;timeoutMs,
long&nbsp;threshold)</span></div>
<div class="block">Pseudo-constructor method to create a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance
 using the passed values.
 <p>
 In the default implementation, two values are combined to calculate an entity's "cache weight":
 its "age" (the time in milliseconds of not being read) and its size in bytes. The resulting value is
 in turn compared to an abstract "free space" value, calculated by subtracting the current total cache size
 in bytes from the abstract threshold value defined here. If this comparison deems the tested entity
 to be "too heavy" for the cache, its data is cleared from the cache. It is also cleared from the cache if its
 "age" is greater than the timeout defined here.<br>
 This is a relatively simple and extremely fast algorithm to create the following behavior:<br>
 <ol>
 <li>Cached data that seems to not be used currently ("too old") is cleared.</li>
 <li>Apart from that, as long as there is "enough space", nothing is cleared.</li>
 <li>The old and bigger an entity's data is, the more likely it is to be cleared.</li>
 <li>The less free space there is in the cache, the sooner cached entity data is cleared.</li>
 </ol>
 This combination of rules is relatively accurate on keeping cached what is needed and dropping the rest,
 while being easily tailorable to suit an application's needs.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeoutMs</code> - the time (in milliseconds, greater than 0) of not being read (the "age"), after which a particular
        entity's data will be cleared from the Storage's internal cache.</dd>
<dd><code>threshold</code> - an abstract value (greater than 0) to evaluate the product of size and age of an entity in relation
        to the current cache size in order to determine if the entity's data shall be cleared from the cache.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new <a href="StorageEntityCacheEvaluator.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator</code></a> instance.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/NumberRangeException.html" title="class in one.microstream.exceptions">NumberRangeException</a></code> - if any of the passed values is equal to or lower than 0.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#New()"><code>New()</code></a>, 
<a href="#New(long)"><code>New(long)</code></a>, 
<a href="StorageEntityCacheEvaluator.Defaults.html" title="interface in one.microstream.storage.types"><code>StorageEntityCacheEvaluator.Defaults</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StorageEntityCacheEvaluator.html">Use</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2021 <a href="https://microstream.one">MicroStream Software</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
